nohup: ignoring input
Reusing configuration cache.
> Task :processResources UP-TO-DATE
> Task :compileJava
> Task :classes
> Task :resolveMainClassName

> Task :bootRun

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.4)

2025-09-19T21:57:12.157+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] com.datn.datnbe.DatnBeApplication        : Starting DatnBeApplication using Java 21.0.8 with PID 173786 (/home/scider/Code/datn-be/build/classes/java/main started by scider in /home/scider/Code/datn-be)
2025-09-19T21:57:12.161+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] com.datn.datnbe.DatnBeApplication        : No active profile set, falling back to 1 default profile: "default"
2025-09-19T21:57:12.229+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-09-19T21:57:12.229+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-09-19T21:57:13.295+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-09-19T21:57:13.296+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-19T21:57:13.325+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] .RepositoryConfigurationExtensionSupport : Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.datn.datnbe.document.repository.MediaRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository
2025-09-19T21:57:13.457+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 152 ms. Found 1 MongoDB repository interface.
2025-09-19T21:57:14.074+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-09-19T21:57:14.082+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-09-19T21:57:14.105+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] .RepositoryConfigurationExtensionSupport : Spring Data JPA - Could not safely identify store assignment for repository candidate interface com.datn.datnbe.document.repository.PresentationRepository; If you want this repository to be a JPA repository, consider annotating your entities with one of these annotations: jakarta.persistence.Entity, jakarta.persistence.MappedSuperclass (preferred), or consider extending one of the following types with your repository: org.springframework.data.jpa.repository.JpaRepository
2025-09-19T21:57:14.122+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 35 ms. Found 4 JPA repository interfaces.
2025-09-19T21:57:14.774+07:00  INFO 173786 --- [datn-be] [cTaskExecutor-1] [                                                 ] com.tngtech.archunit.core.PluginLoader   : Detected Java version 21.0.8
2025-09-19T21:57:18.646+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-09-19T21:57:18.663+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-19T21:57:18.663+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2025-09-19T21:57:18.704+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-19T21:57:18.705+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 6474 ms
2025-09-19T21:57:19.100+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-09-19T21:57:19.149+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.22.Final
2025-09-19T21:57:19.181+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-09-19T21:57:19.481+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-09-19T21:57:19.514+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-19T21:57:19.640+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4fdcd665
2025-09-19T21:57:19.642+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-19T21:57:19.670+07:00  WARN 173786 --- [datn-be] [  restartedMain] [                                                 ] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-09-19T21:57:19.691+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 17.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-09-19T21:57:20.766+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-09-19T21:57:20.824+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-09-19T21:57:21.344+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-09-19T21:57:21.473+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] c.d.d.a.c.c.o.OpenAiModelConfig          : Configuring model: GPT-4 Optimized
2025-09-19T21:57:21.482+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] c.d.d.a.c.c.o.OpenAiModelConfig          : Configuring model: GPT-4.1 Nano
2025-09-19T21:57:21.565+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] c.d.d.a.c.c.ChatClientConfig             : Build Chat Client for model: gpt-4o-mini-2024-07-18 from provider: openai
2025-09-19T21:57:21.571+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] c.d.d.a.c.c.ChatClientConfig             : Build Chat Client for model: gpt-4.1-nano-2025-04-14 from provider: openai
2025-09-19T21:57:21.572+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] c.d.d.a.c.c.ChatClientConfig             : Build Chat Client for model: gemini-2.5-flash from provider: gemini
2025-09-19T21:57:21.573+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] c.d.d.a.c.c.ChatClientConfig             : Build Chat Client for model: gemini-2.5-flash-lite from provider: gemini
2025-09-19T21:57:21.574+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] c.d.d.a.c.c.ChatClientConfig             : Chat clients created successfully for all models.
2025-09-19T21:57:21.841+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] org.mongodb.driver.client                : MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-boot", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/21.0.8+9-Ubuntu-0ubuntu124.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=MongoCredential{mechanism=null, userName='mongouser', source='admin', password=<hidden>, mechanismProperties=<hidden>}, transportSettings=null, commandListeners=[io.micrometer.core.instrument.binder.mongodb.MongoMetricsCommandListener@4e418572], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@77192c0e, com.mongodb.Jep395RecordCodecProvider@6c586c99, com.mongodb.KotlinCodecProvider@7f1840a6]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[io.micrometer.core.instrument.binder.mongodb.MongoMetricsConnectionPoolListener@372cf896], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-19T21:57:21.858+07:00  INFO 173786 --- [datn-be] [localhost:27017] [                                                 ] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=17, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=28153154, minRoundTripTimeNanos=0}
2025-09-19T21:57:21.978+07:00  WARN 173786 --- [datn-be] [  restartedMain] [                                                 ] o.s.b.d.a.OptionalLiveReloadServer       : Unable to start LiveReload server
2025-09-19T21:57:23.528+07:00  WARN 173786 --- [datn-be] [  restartedMain] [                                                 ] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-09-19T21:57:24.426+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:postgresql://localhost:5432/datn_monolith_db'
2025-09-19T21:57:24.539+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2025-09-19T21:57:24.646+07:00  WARN 173786 --- [datn-be] [  restartedMain] [                                                 ] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2025-09-19T21:57:24.748+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] .s.m.e.c.DefaultEventPublicationRegistry : No publications outstanding!
2025-09-19T21:57:24.940+07:00  WARN 173786 --- [datn-be] [  restartedMain] [                                                 ] o.s.b.f.support.DisposableBeanAdapter    : Invocation of close method failed on bean with name 'vertexAI': java.lang.IllegalStateException: java.io.IOException: Your default credentials were not found. To set up Application Default Credentials for your environment, see https://cloud.google.com/docs/authentication/external/set-up-adc.
2025-09-19T21:57:24.941+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-09-19T21:57:24.944+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-19T21:57:24.949+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-19T21:57:24.971+07:00  INFO 173786 --- [datn-be] [  restartedMain] [                                                 ] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-09-19T21:57:24.991+07:00 ERROR 173786 --- [datn-be] [  restartedMain] [                                                 ] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.


BUILD SUCCESSFUL in 16s
4 actionable tasks: 3 executed, 1 up-to-date
Configuration cache entry reused.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           2025-09-19T21:57:11.770+07:00  INFO 161602 --- [datn-be] [   File Watcher] [                                                 ] rtingClassPathChangeChangedEventListener : Restarting due to 2 class path changes (0 additions, 0 deletions, 2 modifications)
2025-09-19T21:57:11.772+07:00  INFO 161602 --- [datn-be] [      Thread-48] [                                                 ] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-19T21:57:11.773+07:00  INFO 161602 --- [datn-be] [tomcat-shutdown] [                                                 ] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-19T21:57:11.778+07:00  INFO 161602 --- [datn-be] [      Thread-48] [                                                 ] .s.m.e.c.DefaultEventPublicationRegistry : No publications outstanding!
2025-09-19T21:57:11.782+07:00  WARN 161602 --- [datn-be] [      Thread-48] [                                                 ] o.s.b.f.support.DisposableBeanAdapter    : Invocation of close method failed on bean with name 'vertexAI': java.lang.IllegalStateException: java.io.IOException: Your default credentials were not found. To set up Application Default Credentials for your environment, see https://cloud.google.com/docs/authentication/external/set-up-adc.
2025-09-19T21:57:11.783+07:00  INFO 161602 --- [datn-be] [      Thread-48] [                                                 ] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-09-19T21:57:11.784+07:00  INFO 161602 --- [datn-be] [      Thread-48] [                                                 ] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown initiated...
2025-09-19T21:57:11.787+07:00  INFO 161602 --- [datn-be] [      Thread-48] [                                                 ] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown completed.

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.4)

2025-09-19T21:57:12.016+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] com.datn.datnbe.DatnBeApplication        : Starting DatnBeApplication using Java 21.0.8 with PID 161602 (/home/scider/Code/datn-be/build/classes/java/main started by scider in /home/scider/Code/datn-be)
2025-09-19T21:57:12.016+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] com.datn.datnbe.DatnBeApplication        : No active profile set, falling back to 1 default profile: "default"
2025-09-19T21:57:12.400+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-09-19T21:57:12.400+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-19T21:57:12.404+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] .RepositoryConfigurationExtensionSupport : Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.datn.datnbe.document.repository.MediaRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository
2025-09-19T21:57:12.406+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 1 MongoDB repository interface.
2025-09-19T21:57:12.639+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-09-19T21:57:12.640+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-09-19T21:57:12.654+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] .RepositoryConfigurationExtensionSupport : Spring Data JPA - Could not safely identify store assignment for repository candidate interface com.datn.datnbe.document.repository.PresentationRepository; If you want this repository to be a JPA repository, consider annotating your entities with one of these annotations: jakarta.persistence.Entity, jakarta.persistence.MappedSuperclass (preferred), or consider extending one of the following types with your repository: org.springframework.data.jpa.repository.JpaRepository
2025-09-19T21:57:12.666+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 24 ms. Found 4 JPA repository interfaces.
2025-09-19T21:57:14.823+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-09-19T21:57:14.823+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-19T21:57:14.823+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2025-09-19T21:57:14.840+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-19T21:57:14.840+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2820 ms
2025-09-19T21:57:15.039+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-09-19T21:57:15.041+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-09-19T21:57:15.052+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-09-19T21:57:15.052+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Starting...
2025-09-19T21:57:15.070+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] com.zaxxer.hikari.pool.HikariPool        : HikariPool-7 - Added connection org.postgresql.jdbc.PgConnection@1e3a7b65
2025-09-19T21:57:15.070+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Start completed.
2025-09-19T21:57:15.073+07:00  WARN 161602 --- [datn-be] [  restartedMain] [                                                 ] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-09-19T21:57:15.074+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-7)']
	Database driver: undefined/unknown
	Database version: 17.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-09-19T21:57:15.170+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-09-19T21:57:15.184+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-09-19T21:57:15.338+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] c.d.d.a.c.c.o.OpenAiModelConfig          : Configuring model: GPT-4 Optimized
2025-09-19T21:57:15.338+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] c.d.d.a.c.c.o.OpenAiModelConfig          : Configuring model: GPT-4.1 Nano
2025-09-19T21:57:15.358+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] c.d.d.a.c.c.ChatClientConfig             : Build Chat Client for model: gpt-4o-mini-2024-07-18 from provider: openai
2025-09-19T21:57:15.358+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] c.d.d.a.c.c.ChatClientConfig             : Build Chat Client for model: gpt-4.1-nano-2025-04-14 from provider: openai
2025-09-19T21:57:15.358+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] c.d.d.a.c.c.ChatClientConfig             : Build Chat Client for model: gemini-2.5-flash from provider: gemini
2025-09-19T21:57:15.359+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] c.d.d.a.c.c.ChatClientConfig             : Build Chat Client for model: gemini-2.5-flash-lite from provider: gemini
2025-09-19T21:57:15.359+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] c.d.d.a.c.c.ChatClientConfig             : Chat clients created successfully for all models.
2025-09-19T21:57:15.424+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] org.mongodb.driver.client                : MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-boot", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/21.0.8+9-Ubuntu-0ubuntu124.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=MongoCredential{mechanism=null, userName='mongouser', source='admin', password=<hidden>, mechanismProperties=<hidden>}, transportSettings=null, commandListeners=[io.micrometer.core.instrument.binder.mongodb.MongoMetricsCommandListener@620ada5b], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@16b12c69, com.mongodb.Jep395RecordCodecProvider@58118928, com.mongodb.KotlinCodecProvider@7e1479e2]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[io.micrometer.core.instrument.binder.mongodb.MongoMetricsConnectionPoolListener@43d3a07d], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-19T21:57:15.426+07:00  INFO 161602 --- [datn-be] [localhost:27017] [                                                 ] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=17, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=1096502, minRoundTripTimeNanos=0}
2025-09-19T21:57:15.493+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-09-19T21:57:15.942+07:00  WARN 161602 --- [datn-be] [  restartedMain] [                                                 ] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-09-19T21:57:16.465+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:postgresql://localhost:5432/datn_monolith_db'
2025-09-19T21:57:16.535+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2025-09-19T21:57:16.575+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-09-19T21:57:16.585+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.s.s.config.TaskSchedulerRouter         : No TaskScheduler/ScheduledExecutorService bean found for scheduled processing
2025-09-19T21:57:16.586+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] com.datn.datnbe.DatnBeApplication        : Started DatnBeApplication in 4.598 seconds (process running for 615.816)
2025-09-19T21:57:16.645+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] c.d.d.a.c.a.AppInitConfig                : Model configuration synchronization completed
2025-09-19T21:57:16.649+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2025-09-19T21:58:11.659+07:00  INFO 161602 --- [datn-be] [nio-8080-exec-1] [                                                 ] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-19T21:58:11.659+07:00  INFO 161602 --- [datn-be] [nio-8080-exec-1] [                                                 ] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-19T21:58:11.661+07:00  INFO 161602 --- [datn-be] [nio-8080-exec-1] [                                                 ] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-09-19T21:58:11.666+07:00  INFO 161602 --- [datn-be] [nio-8080-exec-1] [                                                 ] c.d.d.a.m.ContentGenerationManagement    : Starting streaming presentation generation for slides
2025-09-19T21:58:11.670+07:00  INFO 161602 --- [datn-be] [nio-8080-exec-1] [                                                 ] c.d.d.a.m.ContentGenerationManagement    : Calling AI to stream presentation slides
2025-09-19T21:58:11.670+07:00  INFO 161602 --- [datn-be] [nio-8080-exec-1] [                                                 ] c.datn.datnbe.ai.apiclient.AIApiClient   : Making SSE request to: http://localhost:8081/api/presentations/generate/mock
2025-09-19T21:58:11.673+07:00  INFO 161602 --- [datn-be] [nio-8080-exec-1] [                                                 ] c.d.d.a.p.ContentGenerationController    : Starting slide generation stream
2025-09-19T21:58:11.681+07:00  INFO 161602 --- [datn-be] [onPool-worker-7] [                                                 ] c.datn.datnbe.ai.apiclient.AIApiClient   : Raw SSE chunk received: "```json\n{\n  \"slides\": [\n    {\n      \"type\": \"main_image\",\n      \"data\": {\n        \"image\": \"Children looking excitedly at an old map of Vietnam with a river highlighted\",\n        \"content\": \"Giới thiệu: Một Cuộc Phiêu Lưu Lịch Sử Về Sông Bạch Đằng!\"\n      }\n    },\n    {\n      \"type\": \"two_column_with_image\",\n      \"title\": \"Ai Đã Xâm Lược Nước Ta?\",\n      \"data\": {\n        \"items\": [\n          \"Quân địch đến từ nước Nam Hán.\",\n          \"Họ muốn chiếm đất nước ta.\",\n          \"Nhân dân ta không muốn bị mất nước.\"\n        ],\n        \"image\": \"Illustration of ancient Chinese warships sailing towards Vietnamese shores\"\n      }\n    },\n    {\n      \"type\": \"two_column_with_image\",\n      \"title\": \"\\\"Bẫy\\\" Trên Sông: Ý Tưởng Của Ngô Quyền!\",\n      \"data\": {\n        \"items\": [\n          \"Ngô Quyền cho cắm cọc nhọn dưới sông.\",\n          \"Cọc ẩn dưới nước lúc triều lên.\",\n          \"Nhô lên đâm thủng thuyền địch khi nước rút.\"\n        ],\n        \"image\": \"Illustration of a wooden stake hidden underwater in a river with a boat approaching\"\n      }\n    },\n    {\n      \"type\": \"two_column_with_image\",\n      \"title\": \"Trận Chiến Rực Lửa Trên Sông!\",\n      \"data\": {\n        \"items\": [\n          \"Thuyền địch mắc bẫy, bị đâm thủng.\",\n          \"Quân ta tấn công từ hai bên bờ.\",\n          \"Chiến thắng vang dội cho dân tộc!\"\n        ],\n        \"image\": \"Illustration of Vietnamese soldiers attacking enemy ships from the riverbanks during a battle\"\n      }\n    },\n    {\n      \"type\": \"main_image\",\n      \"data\": {\n        \"image\": \"Illustration of a proud Vietnamese flag waving over a peaceful landscape\",\n        \"content\": \"Chiến thắng Bạch Đằng giúp đất nước ta mãi mãi tự do!\"\n      }\n    }\n  ]\n}\n```"
2025-09-19T21:58:11.682+07:00  INFO 161602 --- [datn-be] [onPool-worker-7] [                                                 ] c.d.d.a.p.ContentGenerationController    : Received response chunk: "```json\n{\n  \"slides\": [\n    {\n      \"type\": \"main_image\",\n      \"data\": {\n        \"image\": \"Children looking excitedly at an old map of Vietnam with a river highlighted\",\n        \"content\": \"Giới thiệu: Một Cuộc Phiêu Lưu Lịch Sử Về Sông Bạch Đằng!\"\n      }\n    },\n    {\n      \"type\": \"two_column_with_image\",\n      \"title\": \"Ai Đã Xâm Lược Nước Ta?\",\n      \"data\": {\n        \"items\": [\n          \"Quân địch đến từ nước Nam Hán.\",\n          \"Họ muốn chiếm đất nước ta.\",\n          \"Nhân dân ta không muốn bị mất nước.\"\n        ],\n        \"image\": \"Illustration of ancient Chinese warships sailing towards Vietnamese shores\"\n      }\n    },\n    {\n      \"type\": \"two_column_with_image\",\n      \"title\": \"\\\"Bẫy\\\" Trên Sông: Ý Tưởng Của Ngô Quyền!\",\n      \"data\": {\n        \"items\": [\n          \"Ngô Quyền cho cắm cọc nhọn dưới sông.\",\n          \"Cọc ẩn dưới nước lúc triều lên.\",\n          \"Nhô lên đâm thủng thuyền địch khi nước rút.\"\n        ],\n        \"image\": \"Illustration of a wooden stake hidden underwater in a river with a boat approaching\"\n      }\n    },\n    {\n      \"type\": \"two_column_with_image\",\n      \"title\": \"Trận Chiến Rực Lửa Trên Sông!\",\n      \"data\": {\n        \"items\": [\n          \"Thuyền địch mắc bẫy, bị đâm thủng.\",\n          \"Quân ta tấn công từ hai bên bờ.\",\n          \"Chiến thắng vang dội cho dân tộc!\"\n        ],\n        \"image\": \"Illustration of Vietnamese soldiers attacking enemy ships from the riverbanks during a battle\"\n      }\n    },\n    {\n      \"type\": \"main_image\",\n      \"data\": {\n        \"image\": \"Illustration of a proud Vietnamese flag waving over a peaceful landscape\",\n        \"content\": \"Chiến thắng Bạch Đằng giúp đất nước ta mãi mãi tự do!\"\n      }\n    }\n  ]\n}\n```"
2025-09-19T21:58:11.682+07:00  INFO 161602 --- [datn-be] [onPool-worker-7] [                                                 ] c.d.d.a.p.ContentGenerationController    : Processing chunk length: 1864
2025-09-19T21:58:11.682+07:00  INFO 161602 --- [datn-be] [onPool-worker-7] [                                                 ] c.d.d.a.p.ContentGenerationController    : Raw chunk first 100 chars: "```json\n{\n  \"slides\": [\n    {\n      \"type\": \"main_image\",\n      \"data\": {\n        \"i
2025-09-19T21:58:11.682+07:00  INFO 161602 --- [datn-be] [onPool-worker-7] [                                                 ] c.d.d.a.p.ContentGenerationController    : Extracted from JSON string, new length: 1707
2025-09-19T21:58:11.682+07:00  INFO 161602 --- [datn-be] [onPool-worker-7] [                                                 ] c.d.d.a.p.ContentGenerationController    : Cleaned chunk length: 1695, starts with: {
  "slides": [
    {
      "type": "main_image",

2025-09-19T21:58:11.683+07:00  INFO 161602 --- [datn-be] [onPool-worker-7] [                                                 ] c.d.d.a.p.ContentGenerationController    : Successfully parsed JSON, node type: OBJECT
2025-09-19T21:58:11.683+07:00  INFO 161602 --- [datn-be] [onPool-worker-7] [                                                 ] c.d.d.a.p.ContentGenerationController    : Found slides container, splitting into individual slides
2025-09-19T21:58:11.690+07:00  INFO 161602 --- [datn-be] [onPool-worker-7] [                                                 ] c.d.d.a.p.ContentGenerationController    : Emitting individual slide from array: {"type":"main_image","data":{"image":"Children looking excitedly at an old map of Vietnam with a riv...
2025-09-19T21:58:11.696+07:00  INFO 161602 --- [datn-be] [onPool-worker-7] [                                                 ] c.d.d.a.p.ContentGenerationController    : Emitting individual slide from array: {"type":"two_column_with_image","title":"Ai Đã Xâm Lược Nước Ta?","data":{"items":["Quân địch đến từ...
2025-09-19T21:58:11.696+07:00  INFO 161602 --- [datn-be] [onPool-worker-7] [                                                 ] c.d.d.a.p.ContentGenerationController    : Emitting individual slide from array: {"type":"two_column_with_image","title":"\"Bẫy\" Trên Sông: Ý Tưởng Của Ngô Quyền!","data":{"items":...
2025-09-19T21:58:11.696+07:00  INFO 161602 --- [datn-be] [onPool-worker-7] [                                                 ] c.d.d.a.p.ContentGenerationController    : Emitting individual slide from array: {"type":"two_column_with_image","title":"Trận Chiến Rực Lửa Trên Sông!","data":{"items":["Thuyền địc...
2025-09-19T21:58:11.696+07:00  INFO 161602 --- [datn-be] [onPool-worker-7] [                                                 ] c.d.d.a.p.ContentGenerationController    : Emitting individual slide from array: {"type":"main_image","data":{"image":"Illustration of a proud Vietnamese flag waving over a peaceful...
2025-09-19T21:58:11.697+07:00  INFO 161602 --- [datn-be] [onPool-worker-7] [                                                 ] c.datn.datnbe.ai.apiclient.AIApiClient   : SSE stream completed
2025-09-19T21:58:12.495+07:00  INFO 161602 --- [datn-be] [     parallel-1] [                                                 ] c.d.d.a.p.ContentGenerationController    : Streaming slide: data: {
  "type" : "main_image",
  "data" : {
    "image" : "Children looking excitedly at an old map of Vietnam with a river highlighted",
    "content" : "Giới thiệu: Một Cuộc Phiêu Lưu Lịch Sử Về Sông Bạch Đằng!"
  }
}


2025-09-19T21:58:13.296+07:00  INFO 161602 --- [datn-be] [     parallel-2] [                                                 ] c.d.d.a.p.ContentGenerationController    : Streaming slide: data: {
  "type" : "two_column_with_image",
  "title" : "Ai Đã Xâm Lược Nước Ta?",
  "data" : {
    "items" : [ "Quân địch đến từ nước Nam Hán.", "Họ muốn chiếm đất nước ta.", "Nhân dân ta không muốn bị mất nước." ],
    "image" : "Illustration of ancient Chinese warships sailing towards Vietnamese shores"
  }
}


2025-09-19T21:58:14.097+07:00  INFO 161602 --- [datn-be] [     parallel-3] [                                                 ] c.d.d.a.p.ContentGenerationController    : Streaming slide: data: {
  "type" : "two_column_with_image",
  "title" : "\"Bẫy\" Trên Sông: Ý Tưởng Của Ngô Quyền!",
  "data" : {
    "items" : [ "Ngô Quyền cho cắm cọc nhọn dưới sông.", "Cọc ẩn dưới nước lúc triều lên.", "Nhô lên đâm thủng thuyền địch khi nước rút." ],
    "image" : "Illustration of a wooden stake hidden underwater in a river with a boat approaching"
  }
}


2025-09-19T21:58:14.898+07:00  INFO 161602 --- [datn-be] [     parallel-4] [                                                 ] c.d.d.a.p.ContentGenerationController    : Streaming slide: data: {
  "type" : "two_column_with_image",
  "title" : "Trận Chiến Rực Lửa Trên Sông!",
  "data" : {
    "items" : [ "Thuyền địch mắc bẫy, bị đâm thủng.", "Quân ta tấn công từ hai bên bờ.", "Chiến thắng vang dội cho dân tộc!" ],
    "image" : "Illustration of Vietnamese soldiers attacking enemy ships from the riverbanks during a battle"
  }
}


2025-09-19T21:58:15.700+07:00  INFO 161602 --- [datn-be] [     parallel-5] [                                                 ] c.d.d.a.p.ContentGenerationController    : Streaming slide: data: {
  "type" : "main_image",
  "data" : {
    "image" : "Illustration of a proud Vietnamese flag waving over a peaceful landscape",
    "content" : "Chiến thắng Bạch Đằng giúp đất nước ta mãi mãi tự do!"
  }
}


2025-09-19T21:58:15.700+07:00  INFO 161602 --- [datn-be] [     parallel-5] [                                                 ] c.d.d.a.p.ContentGenerationController    : Completed streaming all slides
2025-09-19T21:59:48.085+07:00  INFO 161602 --- [datn-be] [nio-8080-exec-4] [                                                 ] c.d.d.a.m.ContentGenerationManagement    : Starting streaming presentation generation for slides
2025-09-19T21:59:48.090+07:00  INFO 161602 --- [datn-be] [nio-8080-exec-4] [                                                 ] c.d.d.a.m.ContentGenerationManagement    : Calling AI to stream presentation slides
2025-09-19T21:59:48.090+07:00  INFO 161602 --- [datn-be] [nio-8080-exec-4] [                                                 ] c.datn.datnbe.ai.apiclient.AIApiClient   : Making SSE request to: http://localhost:8081/api/presentations/generate/mock
2025-09-19T21:59:48.091+07:00  INFO 161602 --- [datn-be] [nio-8080-exec-4] [                                                 ] c.d.d.a.p.ContentGenerationController    : Starting slide generation stream
2025-09-19T21:59:48.096+07:00  INFO 161602 --- [datn-be] [onPool-worker-8] [                                                 ] c.datn.datnbe.ai.apiclient.AIApiClient   : Raw SSE chunk received: "```json\n{\n  \"slides\": [\n    {\n      \"type\": \"main_image\",\n      \"data\": {\n        \"image\": \"Children looking excitedly at an old map of Vietnam with a river highlighted\",\n        \"content\": \"Giới thiệu: Một Cuộc Phiêu Lưu Lịch Sử Về Sông Bạch Đằng!\"\n      }\n    },\n    {\n      \"type\": \"two_column_with_image\",\n      \"title\": \"Ai Đã Xâm Lược Nước Ta?\",\n      \"data\": {\n        \"items\": [\n          \"Quân địch đến từ nước Nam Hán.\",\n          \"Họ muốn chiếm đất nước ta.\",\n          \"Nhân dân ta không muốn bị mất nước.\"\n        ],\n        \"image\": \"Illustration of ancient Chinese warships sailing towards Vietnamese shores\"\n      }\n    },\n    {\n      \"type\": \"two_column_with_image\",\n      \"title\": \"\\\"Bẫy\\\" Trên Sông: Ý Tưởng Của Ngô Quyền!\",\n      \"data\": {\n        \"items\": [\n          \"Ngô Quyền cho cắm cọc nhọn dưới sông.\",\n          \"Cọc ẩn dưới nước lúc triều lên.\",\n          \"Nhô lên đâm thủng thuyền địch khi nước rút.\"\n        ],\n        \"image\": \"Illustration of a wooden stake hidden underwater in a river with a boat approaching\"\n      }\n    },\n    {\n      \"type\": \"two_column_with_image\",\n      \"title\": \"Trận Chiến Rực Lửa Trên Sông!\",\n      \"data\": {\n        \"items\": [\n          \"Thuyền địch mắc bẫy, bị đâm thủng.\",\n          \"Quân ta tấn công từ hai bên bờ.\",\n          \"Chiến thắng vang dội cho dân tộc!\"\n        ],\n        \"image\": \"Illustration of Vietnamese soldiers attacking enemy ships from the riverbanks during a battle\"\n      }\n    },\n    {\n      \"type\": \"main_image\",\n      \"data\": {\n        \"image\": \"Illustration of a proud Vietnamese flag waving over a peaceful landscape\",\n        \"content\": \"Chiến thắng Bạch Đằng giúp đất nước ta mãi mãi tự do!\"\n      }\n    }\n  ]\n}\n```"
2025-09-19T21:59:48.097+07:00  INFO 161602 --- [datn-be] [onPool-worker-8] [                                                 ] c.d.d.a.p.ContentGenerationController    : Received response chunk: "```json\n{\n  \"slides\": [\n    {\n      \"type\": \"main_image\",\n      \"data\": {\n        \"image\": \"Children looking excitedly at an old map of Vietnam with a river highlighted\",\n        \"content\": \"Giới thiệu: Một Cuộc Phiêu Lưu Lịch Sử Về Sông Bạch Đằng!\"\n      }\n    },\n    {\n      \"type\": \"two_column_with_image\",\n      \"title\": \"Ai Đã Xâm Lược Nước Ta?\",\n      \"data\": {\n        \"items\": [\n          \"Quân địch đến từ nước Nam Hán.\",\n          \"Họ muốn chiếm đất nước ta.\",\n          \"Nhân dân ta không muốn bị mất nước.\"\n        ],\n        \"image\": \"Illustration of ancient Chinese warships sailing towards Vietnamese shores\"\n      }\n    },\n    {\n      \"type\": \"two_column_with_image\",\n      \"title\": \"\\\"Bẫy\\\" Trên Sông: Ý Tưởng Của Ngô Quyền!\",\n      \"data\": {\n        \"items\": [\n          \"Ngô Quyền cho cắm cọc nhọn dưới sông.\",\n          \"Cọc ẩn dưới nước lúc triều lên.\",\n          \"Nhô lên đâm thủng thuyền địch khi nước rút.\"\n        ],\n        \"image\": \"Illustration of a wooden stake hidden underwater in a river with a boat approaching\"\n      }\n    },\n    {\n      \"type\": \"two_column_with_image\",\n      \"title\": \"Trận Chiến Rực Lửa Trên Sông!\",\n      \"data\": {\n        \"items\": [\n          \"Thuyền địch mắc bẫy, bị đâm thủng.\",\n          \"Quân ta tấn công từ hai bên bờ.\",\n          \"Chiến thắng vang dội cho dân tộc!\"\n        ],\n        \"image\": \"Illustration of Vietnamese soldiers attacking enemy ships from the riverbanks during a battle\"\n      }\n    },\n    {\n      \"type\": \"main_image\",\n      \"data\": {\n        \"image\": \"Illustration of a proud Vietnamese flag waving over a peaceful landscape\",\n        \"content\": \"Chiến thắng Bạch Đằng giúp đất nước ta mãi mãi tự do!\"\n      }\n    }\n  ]\n}\n```"
2025-09-19T21:59:48.097+07:00  INFO 161602 --- [datn-be] [onPool-worker-8] [                                                 ] c.d.d.a.p.ContentGenerationController    : Processing chunk length: 1864
2025-09-19T21:59:48.097+07:00  INFO 161602 --- [datn-be] [onPool-worker-8] [                                                 ] c.d.d.a.p.ContentGenerationController    : Raw chunk first 100 chars: "```json\n{\n  \"slides\": [\n    {\n      \"type\": \"main_image\",\n      \"data\": {\n        \"i
2025-09-19T21:59:48.097+07:00  INFO 161602 --- [datn-be] [onPool-worker-8] [                                                 ] c.d.d.a.p.ContentGenerationController    : Extracted from JSON string, new length: 1707
2025-09-19T21:59:48.097+07:00  INFO 161602 --- [datn-be] [onPool-worker-8] [                                                 ] c.d.d.a.p.ContentGenerationController    : Cleaned chunk length: 1695, starts with: {
  "slides": [
    {
      "type": "main_image",

2025-09-19T21:59:48.097+07:00  INFO 161602 --- [datn-be] [onPool-worker-8] [                                                 ] c.d.d.a.p.ContentGenerationController    : Successfully parsed JSON, node type: OBJECT
2025-09-19T21:59:48.097+07:00  INFO 161602 --- [datn-be] [onPool-worker-8] [                                                 ] c.d.d.a.p.ContentGenerationController    : Found slides container, splitting into individual slides
2025-09-19T21:59:48.098+07:00  INFO 161602 --- [datn-be] [onPool-worker-8] [                                                 ] c.d.d.a.p.ContentGenerationController    : Emitting individual slide from array: {"type":"main_image","data":{"image":"Children looking excitedly at an old map of Vietnam with a riv...
2025-09-19T21:59:48.098+07:00  INFO 161602 --- [datn-be] [onPool-worker-8] [                                                 ] c.d.d.a.p.ContentGenerationController    : Emitting individual slide from array: {"type":"two_column_with_image","title":"Ai Đã Xâm Lược Nước Ta?","data":{"items":["Quân địch đến từ...
2025-09-19T21:59:48.099+07:00  INFO 161602 --- [datn-be] [onPool-worker-8] [                                                 ] c.d.d.a.p.ContentGenerationController    : Emitting individual slide from array: {"type":"two_column_with_image","title":"\"Bẫy\" Trên Sông: Ý Tưởng Của Ngô Quyền!","data":{"items":...
2025-09-19T21:59:48.099+07:00  INFO 161602 --- [datn-be] [onPool-worker-8] [                                                 ] c.d.d.a.p.ContentGenerationController    : Emitting individual slide from array: {"type":"two_column_with_image","title":"Trận Chiến Rực Lửa Trên Sông!","data":{"items":["Thuyền địc...
2025-09-19T21:59:48.099+07:00  INFO 161602 --- [datn-be] [onPool-worker-8] [                                                 ] c.d.d.a.p.ContentGenerationController    : Emitting individual slide from array: {"type":"main_image","data":{"image":"Illustration of a proud Vietnamese flag waving over a peaceful...
2025-09-19T21:59:48.099+07:00  INFO 161602 --- [datn-be] [onPool-worker-8] [                                                 ] c.datn.datnbe.ai.apiclient.AIApiClient   : SSE stream completed
2025-09-19T21:59:48.898+07:00  INFO 161602 --- [datn-be] [     parallel-6] [                                                 ] c.d.d.a.p.ContentGenerationController    : Streaming slide: data: {
  "type" : "main_image",
  "data" : {
    "image" : "Children looking excitedly at an old map of Vietnam with a river highlighted",
    "content" : "Giới thiệu: Một Cuộc Phiêu Lưu Lịch Sử Về Sông Bạch Đằng!"
  }
}


2025-09-19T21:59:49.700+07:00  INFO 161602 --- [datn-be] [     parallel-7] [                                                 ] c.d.d.a.p.ContentGenerationController    : Streaming slide: data: {
  "type" : "two_column_with_image",
  "title" : "Ai Đã Xâm Lược Nước Ta?",
  "data" : {
    "items" : [ "Quân địch đến từ nước Nam Hán.", "Họ muốn chiếm đất nước ta.", "Nhân dân ta không muốn bị mất nước." ],
    "image" : "Illustration of ancient Chinese warships sailing towards Vietnamese shores"
  }
}


2025-09-19T21:59:50.501+07:00  INFO 161602 --- [datn-be] [     parallel-8] [                                                 ] c.d.d.a.p.ContentGenerationController    : Streaming slide: data: {
  "type" : "two_column_with_image",
  "title" : "\"Bẫy\" Trên Sông: Ý Tưởng Của Ngô Quyền!",
  "data" : {
    "items" : [ "Ngô Quyền cho cắm cọc nhọn dưới sông.", "Cọc ẩn dưới nước lúc triều lên.", "Nhô lên đâm thủng thuyền địch khi nước rút." ],
    "image" : "Illustration of a wooden stake hidden underwater in a river with a boat approaching"
  }
}


2025-09-19T21:59:51.303+07:00  INFO 161602 --- [datn-be] [     parallel-9] [                                                 ] c.d.d.a.p.ContentGenerationController    : Streaming slide: data: {
  "type" : "two_column_with_image",
  "title" : "Trận Chiến Rực Lửa Trên Sông!",
  "data" : {
    "items" : [ "Thuyền địch mắc bẫy, bị đâm thủng.", "Quân ta tấn công từ hai bên bờ.", "Chiến thắng vang dội cho dân tộc!" ],
    "image" : "Illustration of Vietnamese soldiers attacking enemy ships from the riverbanks during a battle"
  }
}


2025-09-19T21:59:52.104+07:00  INFO 161602 --- [datn-be] [    parallel-10] [                                                 ] c.d.d.a.p.ContentGenerationController    : Streaming slide: data: {
  "type" : "main_image",
  "data" : {
    "image" : "Illustration of a proud Vietnamese flag waving over a peaceful landscape",
    "content" : "Chiến thắng Bạch Đằng giúp đất nước ta mãi mãi tự do!"
  }
}


2025-09-19T21:59:52.105+07:00  INFO 161602 --- [datn-be] [    parallel-10] [                                                 ] c.d.d.a.p.ContentGenerationController    : Completed streaming all slides
2025-09-19T22:02:46.140+07:00  INFO 161602 --- [datn-be] [   File Watcher] [                                                 ] rtingClassPathChangeChangedEventListener : Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-09-19T22:02:46.143+07:00  INFO 161602 --- [datn-be] [      Thread-57] [                                                 ] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-09-19T22:02:46.145+07:00  INFO 161602 --- [datn-be] [tomcat-shutdown] [                                                 ] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-09-19T22:02:46.158+07:00  INFO 161602 --- [datn-be] [      Thread-57] [                                                 ] .s.m.e.c.DefaultEventPublicationRegistry : No publications outstanding!
2025-09-19T22:02:46.162+07:00  WARN 161602 --- [datn-be] [      Thread-57] [                                                 ] o.s.b.f.support.DisposableBeanAdapter    : Invocation of close method failed on bean with name 'vertexAI': java.lang.IllegalStateException: java.io.IOException: Your default credentials were not found. To set up Application Default Credentials for your environment, see https://cloud.google.com/docs/authentication/external/set-up-adc.
2025-09-19T22:02:46.163+07:00  INFO 161602 --- [datn-be] [      Thread-57] [                                                 ] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-09-19T22:02:46.165+07:00  INFO 161602 --- [datn-be] [      Thread-57] [                                                 ] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown initiated...
2025-09-19T22:02:46.171+07:00  INFO 161602 --- [datn-be] [      Thread-57] [                                                 ] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown completed.

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.4)

2025-09-19T22:02:46.498+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] com.datn.datnbe.DatnBeApplication        : Starting DatnBeApplication using Java 21.0.8 with PID 161602 (/home/scider/Code/datn-be/build/classes/java/main started by scider in /home/scider/Code/datn-be)
2025-09-19T22:02:46.499+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] com.datn.datnbe.DatnBeApplication        : No active profile set, falling back to 1 default profile: "default"
2025-09-19T22:02:46.943+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-09-19T22:02:46.943+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-09-19T22:02:46.945+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] .RepositoryConfigurationExtensionSupport : Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.datn.datnbe.document.repository.MediaRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository
2025-09-19T22:02:46.947+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 1 MongoDB repository interface.
2025-09-19T22:02:47.158+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-09-19T22:02:47.158+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-09-19T22:02:47.171+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] .RepositoryConfigurationExtensionSupport : Spring Data JPA - Could not safely identify store assignment for repository candidate interface com.datn.datnbe.document.repository.PresentationRepository; If you want this repository to be a JPA repository, consider annotating your entities with one of these annotations: jakarta.persistence.Entity, jakarta.persistence.MappedSuperclass (preferred), or consider extending one of the following types with your repository: org.springframework.data.jpa.repository.JpaRepository
2025-09-19T22:02:47.180+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 21 ms. Found 4 JPA repository interfaces.
2025-09-19T22:02:50.520+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-09-19T22:02:50.521+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-19T22:02:50.522+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2025-09-19T22:02:50.538+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-19T22:02:50.538+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4036 ms
2025-09-19T22:02:50.794+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-09-19T22:02:50.796+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-09-19T22:02:50.806+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-09-19T22:02:50.807+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Starting...
2025-09-19T22:02:50.828+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] com.zaxxer.hikari.pool.HikariPool        : HikariPool-8 - Added connection org.postgresql.jdbc.PgConnection@e34f726
2025-09-19T22:02:50.829+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Start completed.
2025-09-19T22:02:50.832+07:00  WARN 161602 --- [datn-be] [  restartedMain] [                                                 ] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-09-19T22:02:50.835+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-8)']
	Database driver: undefined/unknown
	Database version: 17.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-09-19T22:02:50.958+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-09-19T22:02:50.973+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-09-19T22:02:51.098+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] c.d.d.a.c.c.o.OpenAiModelConfig          : Configuring model: GPT-4 Optimized
2025-09-19T22:02:51.099+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] c.d.d.a.c.c.o.OpenAiModelConfig          : Configuring model: GPT-4.1 Nano
2025-09-19T22:02:51.112+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] c.d.d.a.c.c.ChatClientConfig             : Build Chat Client for model: gpt-4o-mini-2024-07-18 from provider: openai
2025-09-19T22:02:51.113+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] c.d.d.a.c.c.ChatClientConfig             : Build Chat Client for model: gpt-4.1-nano-2025-04-14 from provider: openai
2025-09-19T22:02:51.113+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] c.d.d.a.c.c.ChatClientConfig             : Build Chat Client for model: gemini-2.5-flash from provider: gemini
2025-09-19T22:02:51.114+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] c.d.d.a.c.c.ChatClientConfig             : Build Chat Client for model: gemini-2.5-flash-lite from provider: gemini
2025-09-19T22:02:51.114+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] c.d.d.a.c.c.ChatClientConfig             : Chat clients created successfully for all models.
2025-09-19T22:02:51.199+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] org.mongodb.driver.client                : MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-boot", "version": "5.5.1"}, "os": {"type": "Linux", "name": "Linux", "architecture": "amd64", "version": "6.14.0-29-generic"}, "platform": "Java/Ubuntu/21.0.8+9-Ubuntu-0ubuntu124.04.1"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=MongoCredential{mechanism=null, userName='mongouser', source='admin', password=<hidden>, mechanismProperties=<hidden>}, transportSettings=null, commandListeners=[io.micrometer.core.instrument.binder.mongodb.MongoMetricsCommandListener@2407a9c7], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@16b12c69, com.mongodb.Jep395RecordCodecProvider@58118928, com.mongodb.KotlinCodecProvider@7e1479e2]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[io.micrometer.core.instrument.binder.mongodb.MongoMetricsConnectionPoolListener@360925d7], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverMonitoringMode=AUTO, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null, timeoutMS=null}
2025-09-19T22:02:51.203+07:00  INFO 161602 --- [datn-be] [localhost:27017] [                                                 ] org.mongodb.driver.cluster               : Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, cryptd=false, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=17, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=4489131, minRoundTripTimeNanos=0}
2025-09-19T22:02:51.251+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-09-19T22:02:51.632+07:00  WARN 161602 --- [datn-be] [  restartedMain] [                                                 ] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-09-19T22:02:52.176+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:postgresql://localhost:5432/datn_monolith_db'
2025-09-19T22:02:52.239+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2025-09-19T22:02:52.280+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-09-19T22:02:52.289+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] o.s.s.config.TaskSchedulerRouter         : No TaskScheduler/ScheduledExecutorService bean found for scheduled processing
2025-09-19T22:02:52.291+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] com.datn.datnbe.DatnBeApplication        : Started DatnBeApplication in 5.83 seconds (process running for 951.521)
2025-09-19T22:02:52.334+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] c.d.d.a.c.a.AppInitConfig                : Model configuration synchronization completed
2025-09-19T22:02:52.336+07:00  INFO 161602 --- [datn-be] [  restartedMain] [                                                 ] .ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged

> Task :bootRun FAILED

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':bootRun'.
> Process 'command '/usr/lib/jvm/java-21-openjdk-amd64/bin/java'' finished with non-zero exit value 137

* Try:
> Run with --stacktrace option to get the stack trace.
> Run with --info or --debug option to get more log output.
> Run with --scan to get full insights.
> Get more help at https://help.gradle.org.

BUILD FAILED in 19m 22s
4 actionable tasks: 1 executed, 3 up-to-date
Configuration cache entry reused.
