spring:
  application:
    name: datn-be-integration-test
  
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration
      - org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration
      - org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration
      - org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration
      - org.springframework.boot.autoconfigure.web.client.RestClientAutoConfiguration
      - org.springframework.boot.autoconfigure.web.client.RestTemplateAutoConfiguration
      - org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration
  
  jpa:
    hibernate:
      ddl-auto: create-drop
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.PostgreSQLDialect
        jdbc:
          batch_size: 20
          batch_versioned_data: true
          fetch_size: 50
        order_inserts: true
        order_updates: true
        cache:
          use_second_level_cache: false
          use_query_cache: false
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    defer-datasource-initialization: false
    
  data:
    mongodb:
      database: testdb

  security:
    oauth2:
      client:
        registration: {}
        provider: {}
      resourceserver:
        jwt:
          issuer-uri: ""
          jwk-set-uri: ""

  ai:
    model:
      chat: none
    chat:
      client:
        enabled: false
    openai:
      api-key: test-key-not-used
    vertex:
      ai:
        gemini:
          project-id: test-project
          location: us-central1
  
  sql:
    init:
      mode: never
  
  devtools:
    restart:
      enabled: false
    livereload:
      enabled: false
  
  jackson:
    serialization:
      write-dates-as-timestamps: false
      indent-output: true
  
  transaction:
    rollback-on-commit-failure: true

server:
  port: 0
  error:
    include-stacktrace: always
    include-message: always

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: always

app:
  cors:
    allowed-origins: "*"
    allowed-origin-patterns: "*"
    allowed-methods: GET,POST,PUT,PATCH,DELETE,OPTIONS
    allow-credentials: false
    max-age: 3600

logging:
  level:
    com:
      datn:
        datnbe: DEBUG
      github:
        dockerjava: WARN
    org:
      springframework:
        web: DEBUG
        boot:
          test: DEBUG
      testcontainers: INFO
      hibernate:
        SQL: DEBUG
        type:
          descriptor:
            sql:
              BasicBinder: TRACE

testcontainers:
  reuse:
    enable: true